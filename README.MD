# ðŸŒ¿ Monitorizame - Sistema de Monitoreo de Cultivos

Este proyecto permite monitorear las condiciones ambientales de un huerto desde cualquier parte del mundo usando sensores conectados a una Raspberry Pi. Los datos son almacenados en una base de datos TimescaleDB alojada en AWS, visualizados en una interfaz web y respaldados automÃ¡ticamente.

---

## ðŸ” CaracterÃ­sticas Principales

* Monitoreo de temperatura, humedad del suelo y luz ambiental
* Raspberry Pi como nodo de captura de datos
* Almacenamiento de datos en TimescaleDB (PostgreSQL)
* Interfaz web responsiva con Bootstrap + Chart.js
* Notificaciones automÃ¡ticas por Telegram
* Backups diarios por SFTP mediante `cron`

---
## ðŸ› ï¸ Roadmap - MonitorÃ­zame  

Este proyecto estÃ¡ en constante evoluciÃ³n. Estas son las mejoras que quiero ir implementando para hacerlo mÃ¡s completo, escalable y Ãºtil:  

### ðŸŒ± Corto plazo  
- [ ] AutomatizaciÃ³n del riego segÃºn las condiciones del entorno  
- [ ] Mejorar la visibilidad de los datos 
- [ ] OpciÃ³n de despliegue en local con **docker-compose** ademÃ¡s de AWS  

### ðŸŒ¿ Medio plazo  
- [ ] Implementar un **dashboard en Grafana** para anÃ¡lisis mÃ¡s completo  
- [ ] AÃ±adir API REST para exponer datos de sensores  
- [ ] OptimizaciÃ³n de la base de datos TimescaleDB para grandes volÃºmenes  

### ðŸŒ³ Largo plazo  
- [ ] AplicaciÃ³n mÃ³vil para el monitoreo remoto  
- [ ] IntegraciÃ³n con servicios de alertas mÃ¡s avanzados (ej. Twilio, Email)  
- [ ] Soporte para mÃºltiples nodos de Raspberry Pi distribuidos  
---


---
ðŸ¤ Contribuciones

Este proyecto estÃ¡ en desarrollo y abierto a mejoras. Â¡Las pull requests son bienvenidas!
---

## âš™ï¸ Requisitos del Sistema

### Hardware

* Raspberry Pi con conexiÃ³n Wi-Fi
* Sensor DHT22 (temperatura y humedad)
* Sensor de humedad digital (GPIO)
* Sensor de luz LM393
* Fuente de alimentaciÃ³n estable

### Software

* Raspberry Pi OS Lite 
* Python 3 con:

  * `psycopg2-binary`
  * `adafruit-circuitpython-dht`
  * `RPi.GPIO`
* Flask, Bootstrap, Chart.js
* Docker + Terraform
* AWS EC2 + TimescaleDB
* Telegram Bot API


## ðŸ“… InstalaciÃ³n en Raspberry Pi

### 1. Instalar Raspberry Pi OS

Descargar desde: [https://www.raspberrypi.com/software/](https://www.raspberrypi.com/software/)

> Se recomienda la versiÃ³n **Lite de 32 bits** por compatibilidad con algunas bibliotecas GPIO.

### 2. Instalar dependencias base

```bash
sudo apt update
sudo apt install -y python3-pip python3-venv libgpiod2 libffi-dev build-essential libpq-dev
```

### 3. Crear y activar entorno virtual

```bash
python3 -m venv ~/venv
source ~/venv/bin/activate
```

### 4. Instalar bibliotecas Python necesarias

```bash
pip install psycopg2-binary adafruit-circuitpython-dht RPi.GPIO
```

### 5. Configurar crontab para ejecuciÃ³n automÃ¡tica cada 5 minutos

```bash
crontab -e
```

Agregar esta lÃ­nea al final (ajusta \[usuario] por tu nombre real):

```bash
*/5 * * * * /bin/bash -c 'source /home/[usuario]/venv/bin/activate && python /home/[usuario]/script/carga.py >> /home/[usuario]/script/log.txt 2>&1'
```

---

## ðŸªœ Infraestructura como CÃ³digo con Terraform

Este repositorio estÃ¡ dividido en mÃ³dulos. Ejecuta cada uno en orden para desplegar toda la infraestructura:

### Estructura

```bash
terraform/
â”œâ”€â”€ redes/          # Crea VPC, subred y tabla de rutas
â”œâ”€â”€ instancias/
    â”œâ”€â”€ timescaledb/   # EC2 con TimescaleDB
    â”œâ”€â”€ ftp/           # Servidor de backups SFTP
    â””â”€â”€ web/           # Interfaz web Flask
```

### Orden de ejecuciÃ³n

1. **Redes**

```bash
cd terraform/redes
terraform init
terraform apply
```

2. **Base de Datos (TimescaleDB)**

```bash
cd ../instancias/timescaledb
terraform init
terraform apply
```

3. **Servidor FTP**

```bash
cd ../ftp
terraform init
terraform apply
```

4. **Servidor Web**

```bash
cd ../web
terraform init
terraform apply
```

> âœ… Usa `terraform destroy` en cualquier mÃ³dulo para eliminar recursos especÃ­ficos.

---

## ðŸ“Š VisualizaciÃ³n de Datos

Una vez desplegado el frontend, accede a la IP elÃ¡stica asociada a la instancia EC2 del servidor web desde cualquier navegador:

```
http://[tu-ip-elastica]
```

---

## ðŸš€ Automatizaciones

* **Backup Diario:** El servidor TimescaleDB ejecuta un `cron` a las 02:00 AM que exporta la base de datos y la envÃ­a al servidor SFTP.
* **Notificaciones:** Un bot de Telegram alerta al usuario cuando se detectan valores fuera de los umbrales.

---

## ðŸ“¤ Licencia

MIT License

---

## ðŸ“… Autor

**JesÃºs RodrÃ­guez**
Repositorio: [Monitorizame](https://github.com/jrodsan/Monitorizame)

